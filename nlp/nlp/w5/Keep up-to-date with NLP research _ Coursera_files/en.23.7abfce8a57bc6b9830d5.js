webpackJsonp([23],{"3BSd":function(module,exports,e){"use strict";var Backbone=e("UKRf"),$=e("mT8w"),_=e("41m7"),t=e("481C"),i=e("glgv"),s=e("G9dH"),n=e("ZO9Z"),r=i.extend({itemView:n,initialize:function initialize(e){_(this).extend(_(e).pick("itemMetadata","numColumns")),this.itemContainerMap={},s.initialize.call(this,e)},setupCollectionContainer:function setupCollectionContainer(){this.setupRows(this.numColumns),_(this.rows).each(function(e,t){var i=$("<div>");i.addClass("c-peer-review-gallery-row bt3-row"),i.attr("data-js","row row-"+t),this.$el.append(i)}.bind(this))},setupRows:function setupRows(e){return this.numColumns=e,this.rows=this.collection.chain().groupBy(function(e,t){return Math.floor(t/this.numColumns)},this).values().value(),_(this.rows).each(function(e,t){_(e).each(function(e){this.itemContainerMap[e.get("id")]=t}.bind(this))}.bind(this)),this},cleanupCollectionContainer:function cleanupCollectionContainer(){this.$el.empty()},itemViewOptions:function itemViewOptions(e){return{itemMetadata:this.itemMetadata,numColumns:this.numColumns,submission:e}},itemViewContainer:function itemViewContainer(e){var t=this.itemContainerMap[e.get("id")];return this.$$("row-"+t)}});t(r.prototype,s),module.exports=r},"6c2p":function(module,exports,e){"use strict";module.exports={}},"7P7G":function(module,exports,e){"use strict";var _=e("41m7"),t=e("1afy"),i=e("Gw54"),s=function ItemMetadataPromise(e,s,n){return _(s).isArray()||(s=[s]),i(e).then(function(e){var i=e.courseMaterials,r=i.getItemMetadata(n);if(!r||!_(s).contains(r.getTypeName()))throw new t.NotFound("Metadata for item: "+n);return r})};module.exports=s},"84I4":function(module,exports,e){var t,i;!function(s){var n=function(e,t,i){var s=function template(t){var i=[],s={},n,r=t||{};return function(t,s,r){i.push("<div"+e.cls(["bt3-alert","bt3-alert-"+t],[null,!0])+">"),s&&i.push("<h4>"+(null==(n=s)?"":n)+"</h4>"),r&&i.push("<p>"+(null==(n=r)?"":n)+"</p>"),i.push("</div>")}.call(this,"type"in r?r.type:"undefined"!=typeof type?type:void 0,"title"in r?r.title:"undefined"!=typeof title?title:void 0,"text"in r?r.text:"undefined"!=typeof text?text:void 0),i.join("")};return function(e){return e&&"_t"in e&&(t=e._t.merge(t)),s(e)}};t=[e("2Fn/"),e("Vg//")],void 0!==(i=function(e,t){var i;return n(e,t,i)}.apply(exports,t))&&(module.exports=i)}(window)},"8LRd":function(module,exports,e){"use strict";var t=e("IukJ"),i=e("s9RR"),s=i.convertNaptimeReviewQueue,n=e("hgxZ");module.exports=function(e){return t.getReviewQueue({userId:n.get().id,courseId:e.get("course").get("id"),itemId:e.get("id")}).then(function(e){return s(e)})}},Aomx:function(module,exports,e){"use strict";exports.default={"de":true,"es":true,"fr":true,"ja":true,"ko":true,"pseudo":true,"pt":true,"ru":true,"tr":true,"zh":true,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":true}},"D6+E":function(module,exports,e){var t,i;!function(s){var n=function(e,t,i){var s=function template(i){var s=[],n={},r,a=i||{};return function(t,i,n,a,o){var u=t.floor(12/i);s.push("<div"+e.cls(["c-peer-review-gallery-tile-container","bt3-col-sm-"+u],[null,!0])+'><a data-js="open-course-link give-feedback-tile-link"'+e.attr("href",n.getReviewLink(),!0,!1)+' class="c-peer-review-gallery-tile nostyle card-rich-interaction"><div class="c-peer-review-gallery-tile-header"><div class="c-peer-review-gallery-tile-timestamp">'+e.escape(null==(r=a(n.getTimestampString()))?"":r)+'</div><h3 class="c-peer-review-gallery-tile-title headline-1-text">'+e.escape(null==(r=a(n.getTruncatedTitle()))?"":r)+"</h3></div>"),o||s.push('<div class="c-peer-review-gallery-tile-footer"><img'+e.attr("src",n.getUserPhoto(),!0,!1)+' class="c-peer-review-gallery-tile-img bt3-img-circle"/><span class="c-peer-review-gallery-tile-submitter-name c-truncate">'+e.escape(null==(r=a(n.getUserName()))?"":r)+"</span></div>"),s.push("</a></div>")}.call(this,"Math"in a?a.Math:"undefined"!=typeof Math?Math:void 0,"numColumns"in a?a.numColumns:"undefined"!=typeof numColumns?numColumns:void 0,"submission"in a?a.submission:"undefined"!=typeof submission?submission:void 0,"_t"in a?a._t:void 0!==t?t:void 0,"hideCreatorDetails"in a?a.hideCreatorDetails:"undefined"!=typeof hideCreatorDetails?hideCreatorDetails:void 0),s.join("")};return function(e){return e&&"_t"in e&&(t=e._t.merge(t)),s(e)}};t=[e("2Fn/"),e("hTA3")],void 0!==(i=function(e,t){var i;return n(e,t,i)}.apply(exports,t))&&(module.exports=i)}(window)},FurJ:function(module,exports,e){"use strict";var _=e("41m7"),t=e("glgv"),i=e("UJwr"),s=e("iMl2"),n=function getMetadata(e){return function(){return this.itemMetadata.get(e)}},r=t.extend({template:s,multitracker:{eventingVersion:2,namespace:"open_course_item.peer_review_review_peers",baseValues:["open_course_id","module_id","lesson_id","item_id"],definitions:{open_course_id:n("course.id"),module_id:n("lesson.module.id"),lesson_id:n("lesson.id"),item_id:n("id"),submission_id:function submission_id(){if(this.submission)return this.submission.get("id")},assignment_user_id:function assignment_user_id(){if(this.submission)return this.submission.get("creator").get("userId")},is_featured:_.constant(!0)},events:{"click.detail":{delegate:'click [data-js~="give-feedback-tile-link"]',values:["submission_id","assignment_user_id","is_featured"]}}},initialize:function initialize(e){_(this).extend(_(e).pick("itemMetadata","submission")),this.hideCreatorDetails=i.get("PeerReview","anonymizePeerReview",{course_id:n("course.id")})}});module.exports=r},Ikir:function(module,exports,e){"use strict";exports.default={}},"N+nk":function(module,exports,e){"use strict";var Backbone=e("UKRf"),_=e("41m7"),t=e("481C"),i=e("glgv"),s=e("G9dH"),n=e("FurJ"),r=i.extend({itemView:n,initialize:function initialize(e){_(this).extend(_(e).pick("itemMetadata")),s.initialize.call(this,e)},cleanupCollectionContainer:function cleanupCollectionContainer(){this.$el.empty()},itemViewOptions:function itemViewOptions(e){return{itemMetadata:this.itemMetadata,submission:e}}});t(r.prototype,s),module.exports=r},Qcf2:function(module,exports,e){"use strict";var t=e("Szcf"),i=e("Sthn");module.exports=function(e){return t(e.metadata).then(function(t){return new i(t,{parse:!0,metadata:e.metadata})})}},Rju2:function(module,exports,e){var t=e("TTz1");"string"==typeof t&&(t=[[module.i,t,""]]);var i,s={};s.transform=void 0;var n=e("MTIv")(t,s);t.locals&&(module.exports=t.locals)},S9Tm:function(module,exports,e){"use strict";(function($,_){var t;void 0!==(t=function(require){function handleMessage(e,t){handleDuration(t,appendMessageTo(e,t))}function appendMessageTo(e,i){var s=processMessage(i),n=$(t(s));return n.hide(),e.append(n),(i.show||defaultShowFunction)(n),n}function defaultShowFunction(e){e.show()}function defaultHideFunction(e,t){e.fadeOut(t)}function processMessage(e){return _.extend({},e,{type:n[e.type]})}function handleDuration(e,t){if(!e.duration)return;var s=e.then||i;(e.hide||defaultHideFunction)(t.delay(e.duration),function(){t.remove(),s()})}var t=e("84I4"),$=e("mT8w"),_=e("41m7"),i=function noop(){},s=500,n={success:"success",info:"info",warning:"warning",error:"danger"},r=[],a={push:function push(){var e=_.toArray(arguments);return r=r.concat(e),a},renderTo:function renderTo(e,t){var i=$(e);for(i.empty();r.length;)handleMessage(i,r.shift());if(t&&!_.isUndefined(t.scrollTo)){if(!_.isNumber(t.scrollTo))throw new TypeError("renderTo(): scrollTo must be a number.");$("html, body").animate({scrollTop:t.scrollTo},500)}return a}};return a}.call(exports,e,exports,module))&&(module.exports=t)}).call(exports,e("mT8w"),e("41m7"))},Sthn:function(module,exports,e){"use strict";var _=e("41m7"),Backbone=e("UKRf"),t=e("w6Dh"),i=Backbone.Collection.extend({model:t,initialize:function initialize(e,t){this.metadata=t.metadata},getItemLink:function getItemLink(){return this.metadata.getBaseLink()},parse:function parse(e,t){return _(e.submissionSummaries).map(function(t){var i=_(e.userProfiles).findWhere({userId:t.creatorId});return _(t).extend({creator:i})})}});module.exports=i},Szcf:function(module,exports,e){"use strict";var t=e("hgxZ"),i=e("S2Uf"),s=e("s9RR"),n=s.convertNaptimeReviewedSubmissions,r=e("s0x3");module.exports=function(e){return t.isAuthenticatedUser()?r.getReviewedSubmissions({userId:t.get().id,courseId:e.get("course").get("id"),itemId:e.get("id")}).then(function(e){return n(e)}):i({})}},TTz1:function(module,exports){},"Vg//":function(module,exports,e){var t=e("Ikir"),i=t.default?t.default:{},s=e("L3lR"),n=s(i);n.getLocale=function(){return"en"},module.exports=n},ZHKT:function(module,exports,e){var t=e("jcR2"),i=t.default?t.default:{},s=e("L3lR"),n=s(i);n.getLocale=function(){return"en"},module.exports=n},ZO9Z:function(module,exports,e){"use strict";var _=e("41m7"),t=e("glgv"),i=e("UJwr"),s=e("D6+E"),n=function getMetadata(e){return function(){return this.itemMetadata.get(e)}},r=t.extend({name:"tile",template:s,multitracker:{eventingVersion:2,namespace:"open_course_item.peer_review_review_peers",baseValues:["open_course_id","module_id","lesson_id","item_id"],definitions:{open_course_id:n("course.id"),module_id:n("lesson.module.id"),lesson_id:n("lesson.id"),item_id:n("id"),submission_id:function submission_id(){if(this.submission)return this.submission.get("id")},assignment_user_id:function assignment_user_id(){if(this.submission)return this.submission.get("creator").get("userId")},is_featured:_.constant(!1)},events:{"click.detail":{delegate:'click [data-js~="give-feedback-tile-link"]',values:["submission_id","assignment_user_id","is_featured"]}}},initialize:function initialize(e){_(this).extend(_(e).pick("itemMetadata","submission","numColumns")),this.hideCreatorDetails=i.get("PeerReview","anonymizePeerReview",{course_id:n("course.id")})}});module.exports=r},ZWLL:function(module,exports,e){"use strict";exports.default={"de":true,"es":true,"fr":true,"ja":true,"ko":true,"pseudo":true,"pt":true,"ru":true,"tr":true,"zh":true,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":true}},akKi:function(module,exports,e){var t,i;!function(s){var n=function(e,t,i){var s=function template(i){var s=[],n={},r,a=i||{};return function(t,i){s.push('<div class="c-peer-review-gallery"><div data-js="flashmessage"></div><div class="bt3-row"><div class="c-peer-review-queue-content bt3-col-md-12"><div data-js="no-next-up-submissions" class="bt3-row"><div class="bt3-col-md-12"><div class="bt3-jumbotron"><p>'+e.escape(null==(r=t("There are no submissions left for you to review. Please check again later!"))?"":r)+'</p></div></div></div><div data-js="no-submissions-need-reviews" class="bt3-row"><div class="bt3-col-md-12"><div class="bt3-jumbotron"><p>'+e.escape(null==(r=t("You have reviewed all ungraded submissions."))?"":r)+"</p><span>"+(null==(r=t("You may review graded submissions, but the authors will not receive your reviews, and your&#32;"))?"":r)+"\n"+(null==(r=t("reviews will not count towards their grade. If possible, please check later for new submissions&#32;"))?"":r)+"\n"+e.escape(null==(r=t("to review."))?"":r)+'</span></div></div></div><div data-js="next-up-list" class="bt3-row"></div><div class="c-peer-review-gallery-controls bt3-row"><div class="bt3-col-md-12 color-secondary-text">'+(null==(r=t("Filter:&nbsp;&nbsp;"))?"":r)+'<select data-js="sort-selector" class="c-select-small">'),function(){var n=i;if("number"==typeof n.length)for(var a=0,o=n.length;a<o;a++){var u=n[a];s.push("<option"+e.attr("value",u.value,!0,!1)+">"+e.escape(null==(r=t(u.label))?"":r)+"</option>")}else{var o=0;for(var a in n){o++;var u=n[a];s.push("<option"+e.attr("value",u.value,!0,!1)+">"+e.escape(null==(r=t(t(u.label)))?"":r)+"</option>")}}}.call(this),s.push('</select></div></div><div data-state="loading" class="bt3-row"><div class="bt3-col-md-12">'+e.escape(null==(r=t("Loading..."))?"":r)+'</div></div><div data-js="list" data-state="load-success"></div><div data-js="no-submissions" data-state="load-success">'+e.escape(null==(r=t("There are no submissions in this list."))?"":r)+"</div></div></div></div>")}.call(this,"_t"in a?a._t:void 0!==t?t:void 0,"sortOptions"in a?a.sortOptions:"undefined"!=typeof sortOptions?sortOptions:void 0),s.join("")};return function(e){return e&&"_t"in e&&(t=e._t.merge(t)),s(e)}};t=[e("2Fn/"),e("kMa8")],void 0!==(i=function(e,t){var i;return n(e,t,i)}.apply(exports,t))&&(module.exports=i)}(window)},hDiM:function(module,exports,e){var t=e("Aomx"),i=t.default?t.default:{},s=e("L3lR"),n=s(i);n.getLocale=function(){return"en"},module.exports=n},hTA3:function(module,exports,e){var t=e("6c2p"),i=t.default?t.default:{},s=e("L3lR"),n=s(i);n.getLocale=function(){return"en"},module.exports=n},iMl2:function(module,exports,e){var t,i;!function(s){var n=function(e,t,i){var s=function template(i){var s=[],n={},r,a=i||{};return function(t,i,n){s.push('<div class="c-peer-review-gallery-tile-container c-peer-review-jumbo-tile bt3-col-sm-12"><a data-js="open-course-link give-feedback-tile-link"'+e.attr("href",t.getReviewLink(),!0,!1)+' class="c-peer-review-gallery-tile nostyle card-rich-interaction"><div class="c-peer-review-gallery-tile-label success">'+e.escape(null==(r=i("Needs review"))?"":r)+'</div><div class="c-peer-review-gallery-tile-header"><h3 class="c-peer-review-gallery-tile-title headline-4-text">'+e.escape(null==(r=i(t.getTruncatedTitle()))?"":r)+'</h3></div><div class="c-peer-review-gallery-tile-footer">'),n||s.push('<div class="c-peer-review-gallery-tile-img-container"><img'+e.attr("src",t.getUserPhoto(),!0,!1)+' class="c-peer-review-gallery-tile-img bt3-img-circle"/></div>'),s.push('<div class="c-peer-review-gallery-tile-author-container">'),n||s.push('<span class="c-peer-review-gallery-tile-submitter-name body-2-text c-truncate">'+e.escape(null==(r=i(t.getUserName()))?"":r)+"</span>"),s.push('<span class="c-peer-review-gallery-tile-timestamp">'+(null==(r=i("Submitted&nbsp;"))?"":r)+"<span>"+e.escape(null==(r=i(t.getTimestampString()))?"":r)+"</span></span></div></div></a></div>")}.call(this,"submission"in a?a.submission:"undefined"!=typeof submission?submission:void 0,"_t"in a?a._t:void 0!==t?t:void 0,"hideCreatorDetails"in a?a.hideCreatorDetails:"undefined"!=typeof hideCreatorDetails?hideCreatorDetails:void 0),s.join("")};return function(e){return e&&"_t"in e&&(t=e._t.merge(t)),s(e)}};t=[e("2Fn/"),e("ZHKT")],void 0!==(i=function(e,t){var i;return n(e,t,i)}.apply(exports,t))&&(module.exports=i)}(window)},jcR2:function(module,exports,e){"use strict";module.exports={de:!0,es:!0,fr:!0,ja:!0,ko:!0,pseudo:!0,pt:!0,ru:!0,tr:!0,zh:!0,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":!0}},k1OA:function(module,exports,e){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var t=e("Zrlr"),i=_interopRequireDefault(t),s=e("zwoO"),n=_interopRequireDefault(s),r=e("Pf15"),a=_interopRequireDefault(r),o,u,l=e("U7vG"),d=_interopRequireWildcard(l),c=e("p2kh"),m=_interopRequireDefault(c),p=e("41m7"),v=_interopRequireDefault(p),f=e("zIFn"),h=_interopRequireDefault(f),b=e("Dlq9"),g=_interopRequireDefault(b),w=e("epGi"),y=_interopRequireDefault(w),S=e("T/oj"),P=_interopRequireDefault(S),k=e("USwW"),R=_interopRequireDefault(k),M=e("mI/e"),x=_interopRequireDefault(M),T=e("ziaV"),C=_interopRequireDefault(T),L=e("nTMC"),F=_interopRequireDefault(L),I=e("Ufek"),j=_interopRequireDefault(I),D=e("mE/L"),U=_interopRequireDefault(D),N=e("Sthn"),A=_interopRequireDefault(N),q=e("oB+a"),E=e("hgxZ"),G=_interopRequireDefault(E),V=e("UJwr"),z=_interopRequireDefault(V),O=e("H1Ke"),W=_interopRequireDefault(O),K=e("/IK8"),Q=_interopRequireDefault(K);e("Rju2");var Z=(u=o=function(e){function PeerItemGiveFeedback(){return(0,i.default)(this,PeerItemGiveFeedback),(0,n.default)(this,e.apply(this,arguments))}return(0,a.default)(PeerItemGiveFeedback,e),PeerItemGiveFeedback.prototype.renderClosedFeedbackView=function renderClosedFeedbackView(){var e=this.props,t=e.assignment,i=e.itemMetadata,s=e.isSubmitted,n=e.itemProgress;return n&&t?d.createElement(P.default,{ViewClass:F.default,className:"rc-PeerItemClosedFeedback",viewOptions:{closureType:t.definition&&t.definition.closureType,itemProgress:n,itemMetadata:i,isSubmitted:s}}):null},PeerItemGiveFeedback.prototype.renderGiveFeedbackView=function renderGiveFeedbackView(){var e=this.props,t=e.submissionSummariesCollection,i=e.itemMetadata;if(!t)return null;var s=t.slice(0,1);return d.createElement(P.default,{ViewClass:x.default,className:"rc-PeerItemGiveFeedback",viewOptions:{numColumns:3,itemMetadata:i,nextUpSubmissions:s}})},PeerItemGiveFeedback.prototype.renderGiveFeedbackNoListView=function renderGiveFeedbackNoListView(){var e=this.props,t=e.itemMetadata,i=e.submissionSummariesCollection,s=e.itemProgress,n=e.displayablePhaseSchedule;if(!i)return null;var r=i.length>0,a=R.default.join(t.getBaseLink(),"review-next");if(s)return d.createElement(C.default,{itemMetadata:t,isSubmissionAvailableForReview:r,reviewNextLink:a,displayablePhaseSchedule:n,itemProgress:s});return null},PeerItemGiveFeedback.prototype.renderSubmitWarning=function renderSubmitWarning(){return d.createElement(j.default,{itemMetadata:this.props.itemMetadata})},PeerItemGiveFeedback.prototype.renderErrorState=function renderErrorState(e){if("mustSubmitBeforeReviewing"===e)return this.renderSubmitWarning();return d.createElement("div",{className:"rc-PeerItemGiveFeedback"},(0,Q.default)("An unknown error has occurred. Please refresh and try again."))},PeerItemGiveFeedback.prototype.render=function render(){var e=this.props,t=e.assignment,i=e.capabilities,s=e.error;if(null!=s)return this.renderErrorState(s);var n=t&&t.definition&&t.definition.closureType;return(0,v.default)(i).contains("reviewPeers")&&(0,v.default)(i).contains("listSubmissions")?this.renderGiveFeedbackView():(0,v.default)(i).contains("reviewPeers")&&!(0,v.default)(i).contains("listSubmissions")?this.renderGiveFeedbackNoListView():null==n?this.renderSubmitWarning():this.renderClosedFeedbackView()},PeerItemGiveFeedback}(d.Component),o.propTypes={assignment:d.PropTypes.object,capabilities:d.PropTypes.arrayOf(d.PropTypes.string).isRequired,submissionSummariesCollection:d.PropTypes.object,isSubmitted:d.PropTypes.bool.isRequired,itemMetadata:d.PropTypes.object.isRequired,displayablePhaseSchedule:d.PropTypes.object,itemProgress:d.PropTypes.object,error:d.PropTypes.string},o.contextTypes={executeAction:d.PropTypes.func.isRequired},u),B=v.default.compose(h.default.createTrackedContainer(function(){return{namespace:{page:"peer_review_review_peers"}}}),(0,m.default)(["PeerAssignmentStore","PeerPermissionsAndProgressesStore","PeerReviewQueueStore","DisplayablePhaseScheduleStore","ProgressStore"],function(e,t){var i=e.PeerAssignmentStore,s=e.PeerPermissionsAndProgressesStore,n=e.PeerReviewQueueStore,r=e.DisplayablePhaseScheduleStore,a=e.ProgressStore,o=void 0,u=void 0,l=n.getState(),d=l.loaded,c=l.loadState,m=l.submissions,p=l.errorType,f=l.itemId;if(d)if("loaded"===c&&t.itemMetadata.get("id")===f){var h=m;o=new A.default(h,{parse:!0,metadata:t.itemMetadata})}else"loadError"===c&&(u=p);var b=s.getState(),g=b.capabilities,w=b.isSubmitted;return{assignment:i.getState().assignment,capabilities:g,isSubmitted:w,submissionSummariesCollection:o,error:u,displayablePhaseSchedule:r.getState().displayablePhaseSchedule,itemProgress:a.courseProgress.getItemProgress(t.itemMetadata.get("id")),hasLoadedPermissions:"loaded"===s.getState().loadState,canReviewPeers:(0,v.default)(g).contains("reviewPeers"),canListSubmissions:(0,v.default)(g).contains("listSubmissions")}}),(0,y.default)(function(e){return e.hasLoadedPermissions},d.createElement(U.default,{className:"rc-PeerItemGiveFeedback"})),(0,g.default)(function(e,t){var i=t.canListSubmissions,s=t.canReviewPeers,n=t.itemMetadata;if(s){var r=i?20:1,a=0;e.executeAction(q.loadReviewQueue,{userId:G.default.get().id,itemId:n.get("id"),courseId:n.get("course").get("id"),start:0,limit:r})}}))(Z);module.exports=B},kMa8:function(module,exports,e){var t=e("ZWLL"),i=t.default?t.default:{},s=e("L3lR"),n=s(i);n.getLocale=function(){return"en"},module.exports=n},"mI/e":function(module,exports,e){"use strict";var Backbone=e("UKRf"),$=e("mT8w"),t=e("jObg"),_=e("41m7"),i=e("I8Ec"),s=e("glgv"),n=e("qZxX"),r=e("S9Tm"),a=e("FFog"),o=e("s2jF"),u=e("wFNx"),l=e("Qcf2"),d=e("3BSd"),c=e("N+nk"),m=e("akKi"),p=["closedPeer","gradedPeer","peer","phasedPeer"],v=function getMetadata(e){return function(){return this.itemMetadata.get(e)}},f=Backbone.Model.extend(_.extend({},a.FiniteStateMachine,{defaults:{state:"ready"},fsm:{states:["ready","loading","load-error","load-success"],transitions:{loading:["ready","load-error","load-success"],"load-error":["loading"],"load-success":["loading"]}}})),h=s.extend({name:"body",template:m,sortOptions:[{label:"Projects I have not reviewed",value:"unreviewed"},{label:"Projects I have reviewed",value:"have-reviewed"}],apis:{unreviewed:u,"have-reviewed":l},events:{'change [data-js~="sort-selector"]':"onChangeSort"},multitracker:{eventingVersion:2,namespace:"open_course_item.peer_review_review_peers",baseValues:["open_course_id","module_id","lesson_id","item_id"],definitions:{open_course_id:v("course.id"),module_id:v("lesson.module.id"),lesson_id:v("lesson.id"),item_id:v("id")},events:{render:[]}},initialize:function initialize(e){_(this).bindAll("onLoadSubmissionsSuccess","onLoadSubmissionsFailure"),_(this).extend(_(e).pick("itemMetadata","nextUpSubmissions","numColumns")),this.sortOptions=this.sortOptions.slice(0),this.nextUpSubmissionsThatNeedReviews=this.nextUpSubmissions?new Backbone.Collection(this.nextUpSubmissions.filter(function(e){return!e.get("reviewTargetReached")})):new Backbone.Collection,this.submissions=new Backbone.Collection,this.stateModel=new f;var t=new i(window.location.href);this.setSort(t.getQueryParamValue("sort")),this.listenTo(this,"view:appended",this.onAppendedView)},onAppendedView:function onAppendedView(){n.scroll(0)},setSort:function setSort(e){this.sort=_(this.sortOptions).find(function(t){return t.value===e}),this.sort||(this.sort=this.sortOptions[0]);var i="unreviewed"!==this.sort.value?"?sort="+this.sort.value:"";t.router.navigateTo(window.location.pathname+i,{replace:!0,trigger:!1})},onChangeSort:function onChangeSort(e){var t=$(e.target);this.setSort(t.val()),this.loadSubmissions()},loadSubmissions:function loadSubmissions(){var e=this.fluxibleContext.getActionContext().getStore("CourseStore"),t=o(e.getCourseSlug(),p,this.itemMetadata.get("id")),i=this.apis[this.sort.value],s=t.then(function(e){return i({metadata:e})});this.stateModel.transition("loading"),s.then(this.onLoadSubmissionsSuccess,this.onLoadSubmissionsFailure).done()},onLoadSubmissionsSuccess:function onLoadSubmissionsSuccess(e){var t=this.nextUpSubmissionsThatNeedReviews.map(function(e){return e.get("id")});this.submissions.reset(e.models.filter(function(e){return!_(t).contains(e.get("id"))})),this.stateModel.transition("load-success"),this.$$("sort-selector").val(this.sort.value),this.$$("no-submissions").toggle(0===this.submissions.length)},onLoadSubmissionsFailure:function onLoadSubmissionsFailure(e){throw this.stateModel.transition("load-error"),e},renderSubviews:function renderSubviews(){this.region.append(c,{to:this.$$("next-up-list"),initialize:{collection:this.nextUpSubmissionsThatNeedReviews,itemMetadata:this.itemMetadata},module:c}),this.region.append(d,{to:this.$$("list"),initialize:{collection:this.submissions,itemMetadata:this.itemMetadata,numColumns:this.numColumns},module:d})},postRender:function postRender(){this.track("open"),r.renderTo(this.$$("flashmessage")),this.loadSubmissions(),this.$$("no-next-up-submissions").toggle(0===this.nextUpSubmissions.length),this.$$("no-submissions-need-reviews").toggle(0!==this.nextUpSubmissions.length&&0===this.nextUpSubmissionsThatNeedReviews.length),this.track("render")}});module.exports=h},nTMC:function(module,exports,e){"use strict";var _=e("41m7"),t=e("glgv"),i=e("WGQC"),s=e("nsAC"),n=e("USwW"),r=e("zb8K"),a=i.extend({defaults:{state:"ready"},fsm:{states:["ready","not-submitted","passed-in-previous-session","submitted"],transitions:{"not-submitted":["ready"],submitted:["ready"],"passed-in-previous-session":["ready"]}}}),o=t.extend({name:"body",template:r,initialize:function initialize(e){_(this).extend(_(e).pick("closureType","itemMetadata","isSubmitted","itemProgress"));var t=new s(this.itemMetadata,this.itemProgress);this.stateModel=new a,this.isSubmitted?this.stateModel.transition("submitted"):t.isPassed()&&t.isEvaluated()?this.stateModel.transition("passed-in-previous-session"):this.stateModel.transition("not-submitted"),this.myProjectLink=n.join(this.itemMetadata.getLink(),"submit")}});module.exports=o},s0x3:function(module,exports,e){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var t=e("S2Uf"),i=_interopRequireDefault(t),s=e("I8Ec"),n=_interopRequireDefault(s),r=e("hHYt"),a=_interopRequireDefault(r),o=(0,a.default)("/api/onDemandPeerAuthoredReviewSummaries.v1",{type:"rest"}),u=["submissionId","isMentorReview","creatorId","createdAt"],l=["userId","externalUserId","fullName","photoUrl","courseRole","isSuperuser"],d=["summary","computed"];exports.getReviewedSubmissions=function(e){var t=e.userId,s=e.courseId,r=e.itemId,a=(new n.default).addQueryParam("userId",t.toString()).addQueryParam("courseId",s).addQueryParam("itemId",r).addQueryParam("q","byItem").addQueryParam("includes",["submissionSummaries","onDemandPeerSubmissionSummaries.v2(profiles)"].join(",")).addQueryParam("fields",[u.join(","),"onDemandPeerSubmissionSummaries.v2("+d.join(",")+")","onDemandSocialProfiles.v1("+l.join(",")+")"].join(","));return(0,i.default)(o.get(a.toString()))}},s2jF:function(module,exports,e){var t=e("d+lr"),i=e("7P7G");module.exports=t(i)},w6Dh:function(module,exports,e){"use strict";var Backbone=e("QDAj"),t=e("gzuN"),i=e("USwW"),s=e("HVx2"),n=e("MtoN"),r=e("IY0p"),a=Backbone.AssociatedModel.extend({relations:[{type:Backbone.One,key:"creator",relatedModel:r}],getReviewLink:function getReviewLink(){return i.join(this.collection.getItemLink(),"review",this.get("id"))},getTimestampString:function getTimestampString(){return this.timestampString=t(this.get("createdAt")).fromNow()},getUserName:function getUserName(){return this.get("creator.fullName")},getUserPhoto:function getUserPhoto(){return this.get("creator.photoUrl")},getTruncatedTitle:function getTruncatedTitle(){return s.byLength(this.get("title"),n.gallery.maxTitleLength)}});module.exports=a},wFNx:function(module,exports,e){"use strict";var t=e("8LRd"),i=e("Sthn");module.exports=function(e){return t(e.metadata).then(function(t){return new i(t,{parse:!0,metadata:e.metadata})})}},zb8K:function(module,exports,e){var t,i;!function(s){var n=function(e,t,i){var s=function template(i){var s=[],n={},r,a=i||{};return function(t,i,n,a){s.push('<div data-state="not-submitted" class="bt3-alert bt3-alert-warning">'),"closedUntilPassed"===t?s.push("<p>"+e.escape(null==(r=i("Pass the assignment before reviewing classmates."))?"":r)+"</p>"):"closedUntilSubmitted"===t||"phasedPeer"===n.getTypeName()?s.push("<p>"+e.escape(null==(r=i("Submit your project before reviewing classmates."))?"":r)+"</p>"):s.push("\x3c!-- This case should never happen, but let's say something true and useless here in case it does.--\x3e<h4>"+e.escape(null==(r=i("You may not review peer submissions now."))?"":r)+"</h4>"),s.push('</div><div data-state="passed-in-previous-session" class="bt3-alert bt3-alert-warning"><p>'+e.escape(null==(r=i("The course team has made some changes which may have affected this assignment. Please re-submit your project to"))?"":r)+"\n"+e.escape(null==(r=i("evaluate your peers. Your previous grade will remain until you receive a new grade."))?"":r)+'\n</p></div><div data-state="submitted" class="bt3-alert bt3-alert-success">'),"closedUntilPassed"===t?s.push("<h4>"+e.escape(null==(r=i("Submitted!"))?"":r)+"</h4><p>"+e.escape(null==(r=i("Weâ€™ll send you an email once your grade is ready. Grading typically takes about 10 days."))?"":r)+"\n"+e.escape(null==(r=i("Once you pass, you need to review peer submissions to finish the assignment."))?"":r)+"</p>"):s.push("\x3c!-- This case should never happen, but let's say something true and useless here in case it does.--\x3e<h4>"+e.escape(null==(r=i("You may not review peer submissions now."))?"":r)+"</h4>"),s.push('</div><div class="bt3-text-center"><a'+e.attr("href",a,!0,!1)+' data-js="open-course-link" class="link-button primary">'+e.escape(null==(r=i("Go to my project"))?"":r)+"</a></div>")}.call(this,"closureType"in a?a.closureType:"undefined"!=typeof closureType?closureType:void 0,"_t"in a?a._t:void 0!==t?t:void 0,"itemMetadata"in a?a.itemMetadata:"undefined"!=typeof itemMetadata?itemMetadata:void 0,"myProjectLink"in a?a.myProjectLink:"undefined"!=typeof myProjectLink?myProjectLink:void 0),s.join("")};return function(e){return e&&"_t"in e&&(t=e._t.merge(t)),s(e)}};t=[e("2Fn/"),e("hDiM")],void 0!==(i=function(e,t){var i;return n(e,t,i)}.apply(exports,t))&&(module.exports=i)}(window)},ziaV:function(module,exports,e){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var t=e("Zrlr"),i=_interopRequireDefault(t),s=e("zwoO"),n=_interopRequireDefault(s),r=e("Pf15"),a=_interopRequireDefault(r),o,u,l=e("U7vG"),d=_interopRequireDefault(l),c=e("7w9w"),m=e("GeSE"),p=_interopRequireDefault(m),v=e("nsAC"),f=_interopRequireDefault(v),h=e("iy/N"),b=e("f8fD"),g=_interopRequireDefault(b),w=e("i5+F"),y=e("/IK8"),S=_interopRequireDefault(y),P=(u=o=function(e){function GiveFeedbackNoList(){return(0,i.default)(this,GiveFeedbackNoList),(0,n.default)(this,e.apply(this,arguments))}return(0,a.default)(GiveFeedbackNoList,e),GiveFeedbackNoList.prototype.renderMentorGradedMessage=function renderMentorGradedMessage(){return d.default.createElement("div",{className:"rc-GiveFeedbackNoList"},d.default.createElement("div",{className:"c-peer-card"},d.default.createElement("p",null,(0,S.default)("All grading for this assignment will be done by course mentors."))),d.default.createElement(g.default,{requestedCapability:w.PeerAdminCapabilities.viewSubmissionList},this.props.isSubmissionAvailableForReview?this.renderWithAvailableSubmissions():this.renderWithoutAvailableSubmissions()))},GiveFeedbackNoList.prototype.renderWithAvailableSubmissions=function renderWithAvailableSubmissions(){var e=this.props,t=e.itemMetadata,i=e.itemProgress,s=e.reviewNextLink,n=new f.default(t,i);return d.default.createElement("div",{className:"rc-GiveFeedbackNoList c-peer-card"},d.default.createElement("div",{className:"body-2-text"},(0,S.default)("Ready to review your classmates?")),d.default.createElement("p",null,(0,S.default)("\n            Reviewing another person's work is a valuable way to learn and providing quality feedback is a useful skill\n            to master. Here are some tips to help you provide the most helpful, accurate, and consistent feedback\n            possible:\n          ")),d.default.createElement("ul",null,d.default.createElement("li",null,(0,S.default)("\n              Remember, English isn't everyone's native language. Focus primarily on how well the work meets the\n              grading criteria.\n            ")),d.default.createElement("li",null,(0,S.default)("\n              When writing critical feedback, use a constructive and polite tone.\n            "))),d.default.createElement("p",null,d.default.createElement(h.FormattedMessage,{message:(0,S.default)("\n              Everyone enrolled in the course must review at least\n              {requiredReviewCount, plural, one{# other submission} other{# other submissions}} to ensure everyone\n              receives a grade; however, many learners complete more to help their classmates who are still waiting.\n              Ready to get started?\n            "),requiredReviewCount:n.requiredReviewCount()})),d.default.createElement(c.Link,{className:"link-button primary","data-js":"open-course-link",to:s},(0,S.default)("Start Reviewing")))},GiveFeedbackNoList.prototype.renderWithoutAvailableSubmissions=function renderWithoutAvailableSubmissions(){var e=this.props,t=e.displayablePhaseSchedule,i=e.itemMetadata,s=e.itemProgress,n=new f.default(i,s),r=t&&"submit"===t.currentPhase&&t.phaseStarts.review,a=r&&p.default.getFormattedDeadline(r);return a&&!n.isReviewingComplete()?d.default.createElement("div",{className:"rc-GiveFeedbackNoList c-peer-card"},d.default.createElement("div",{className:"body-2-text"},(0,S.default)("No Submissions Available")),d.default.createElement("div",null,d.default.createElement(h.FormattedMessage,{message:(0,S.default)("\n                There are no submissions available for you to review right now. We'll send you an email when\n                classmates' submissions are available to review. Classmates' submissions will be available to review by\n                {reviewsAvailableTime}.\n              "),reviewsAvailableTime:d.default.createElement("span",{className:"body-2-text"},a)}))):d.default.createElement("div",{className:"rc-GiveFeedbackNoList c-peer-card"},d.default.createElement("div",{className:"body-2-text"},(0,S.default)("No Submissions Available")),d.default.createElement("div",null,(0,S.default)("\n              There are no submissions available for you to review right now. Come back later if you want to review\n              more classmates' submissions!\n            ")))},GiveFeedbackNoList.prototype.render=function render(){var e=this.props,t=e.isSubmissionAvailableForReview;return e.itemMetadata.isMentorGraded()?this.renderMentorGradedMessage():t?this.renderWithAvailableSubmissions():this.renderWithoutAvailableSubmissions()},GiveFeedbackNoList}(d.default.Component),o.propTypes={displayablePhaseSchedule:d.default.PropTypes.object,isSubmissionAvailableForReview:d.default.PropTypes.bool.isRequired,itemMetadata:d.default.PropTypes.object.isRequired,itemProgress:d.default.PropTypes.object.isRequired,reviewNextLink:d.default.PropTypes.string.isRequired},u);module.exports=P}});
//# sourceMappingURL=en.23.7abfce8a57bc6b9830d5.js.map